source leaprc.protein.ff19SB
source leaprc.water.tip3p
addAtomTypes { { "ZN" "Zn" "sp3" } { "S3" "S" "sp3" } } # Add atom types for the ZAFF metal center
loadamberparams frcmod.ions1lm_126_tip3p #Load the Li/Merz 12-6 parameter set for monovalent ions
loadamberprep ZAFF.prep #Load ZAFF prep file
loadamberparams ZAFF.frcmod #Load ZAFF frcmod file

mol = loadpdb "complex_eq_noH.pdb" 

savePDB mol "debug_loaded.pdb"

bond mol.313.ZN mol.210.SG 
bond mol.313.ZN mol.213.SG 
bond mol.313.ZN mol.278.SG 
bond mol.313.ZN mol.281.SG 

solvateOct mol TIP3PBOX 30.0 # Solvate system

addions mol CL 0

savepdb mol complex_eq_ZAFF_solvated.pdb #Save the pdb file
saveamberparm mol complex_eq.prmtop complex_eq.inpcrd #Save the topology and coordinate files
quit #Quit tleap